### Описание проекта

Представленный проект реализован в рамках тестового задания.<br>
<br>
#### Задание:
Реализуйте REST-сервис просмотра текущей зарплаты и даты следующего
повышения. Из-за того, что такие данные очень важны и критичны, каждый
сотрудник может видеть только свою сумму. Для обеспечения безопасности, вам
потребуется реализовать метод где по логину и паролю сотрудника будет выдан
секретный токен, который действует в течение определенного времени. Запрос
данных о зарплате должен выдаваться только при предъявлении валидного токена.

#### Требования к решению

Обязательные технические требования:
- код размещен и доступен в публичном репозитории на GitLab; +
- оформлена инструкция по запуску сервиса и взаимодействию с проектом
(Markdown файл с использованием конструкций разметки от GitLab по
необходимости); +
- сервис реализован на FastAPI. +

Необязательные технические требования (по возрастанию трудоемкости):
- зависимости зафиксированы менеджером зависимостей poetry; +
- написаны тесты с использованием pytest; +
- реализована возможность собирать и запускать контейнер с сервисом в Docker. +

## Инструкция по установке и использованию API

1. Установите Docker или Docker-desktop, если он еще не установлен.

2. Клонируйте репозиторий в заранее созданную папку

```bash
cd <folder_name>
git clone ...
```

3. Перейдите в директорию проекта и создайте файл `.env` и заполните
данными как в файле `.env-sample` - необходимо для конфигурации подключения
к базе данных и формироваия токена доступа.
4. В файле .env после заполнения данными для подключения к базе данных,
выполните комманду в терминале:
```bash
openssl rand -hex 32
```
и полученное значение вставьте в поле `SECRET_KEY`. Так же вставьте в поле
`ALGORITHM=HS256`, и заполните поле `ACCESS_TOKEN_EXPIRE_MINUTES` на свое усмотрение.

5. Далее Вам необходимо выполнить команду:
```bash
docker-compose up --build
```

6. Если Вы сделали все корректно, то после команды `docker-compose up --build`
должны выполниться:
- установка всех необходимых зависимостей
- миграция (создание таблиц в базе данных)
- автозаполнение заранее подготовленными данными в таблицы
- запуск сервера, который будет доступен по адресу http://127.0.0.1:8000/docs/

#### Тестовые данные (заполняются автоматически и находятся в файле insert_into_tables.sql):
Отделы:
```
Отдел продаж: id=1
Юридический отдел: id=2
Отдел разработки: id=3
Отдел маркетинга: id=4
```

Сотрудники:
```
user1 : Password.1
user2 : Password.2
user3 : Password.3
user4 : Password.4
user5 : Password.4
user6 : Password.6
user7 : Password.7
user8 : Password.8
```

Текущая зарплата и дата следующего повышения по id сотрудника:
```
id=1 : 50000.00, 2022-07-01
id=2 : 50000.00, 2022-08-02
id=3 : 50000.00, 2022-09-03
id=4 : 50000.00, 2022-10-04
id=5 : 50000.00, 2022-11-05
id=6 : 50000.00, 2022-12-06
id=7 : 50000.00, 2023-01-07,
id=8 : 50000.00, 2023-02-08
```

### Инструкция по использованию API

1. В рамках реализации задачи, была реализована возможность добавления
нового сотрудника или устанавливать зарплату для сотрудника при использовании
API. Для этого перейдите по адресу: http://127.0.0.1:8000/docs/ и в разделе
`Employees` в методе `POST` заполнить следующие данные:
```
{
  "username": "string",
  "email": "string",
  "phone_number": "string",
  "first_name": "string",
  "last_name": "string",
  "start_date": "2023-06-17",
  "department_id": 0,
  "password": "string"
}
```
Аналогичным образом при установлении данных о заработной плате перейдите в раздел
`Salaries` и заполните следующие данные:
```
{
  "employee_id": 0,
  "department_id": 0,
  "current_salary": 0,
  "next_salary": 0,
  "raise_date": "2023-06-17"
}
```

2. Для того что бы получить данные о текущей заработной плате и дате следующего повышения
сотрудника, перейдите в раздел default и выберите POST-запрос, в котором
Вам понадобится заполнить данный username и password, приведенные ранее, например:
```
user1
Password.1
```
Затем скопируйте значение полученного в ответе токен доступа (без кавычек), например:
`"access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyMSIsImV4cCI6MTY4NzAwNzU1OH0.TPOP1RNphZ5dCD_bhICmfwgrIWgsj0OoeWW6Ex3jZAY"`

3. Для уже непосредственного получения данных перейдите в GET-запрос раздела default
и авторизуйтесь (нажмите на замок справа) в выпадающем окне заполните данные
`username` и `password` которые вы вносили для получения токена и в поле 
`client_secret` вставьте скопированный ранее токен доступа
4. Введите id сотрудника (обязательно по которому получали токен) и в ответе
получете необходимые данные, например:
```
{
  "employee_id": 1,
  "department_id": 3,
  "current_salary": 50000,
  "next_salary": 60000,
  "raise_date": "2022-07-01",
  "id": 1
}
```